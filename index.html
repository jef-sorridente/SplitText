<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Split Text</title>
  </head>
  <body>
    <style>
      body {
        background-color: #1584c1;
        margin: 3% 25% 0 25%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        font-family: Arial, Helvetica, sans-serif;
      }

      .container-title-animation {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .title {
        font-size: clamp(2rem, 10rem, 5vw);
        color: #dfdcff;
        line-height: 1.2;
        text-align: center;
        font-weight: normal;
        opacity: 0;
      }
    </style>

    <div class="container-title-animation">
      <h2 class="title title-animation">
        Qualquer texto vai funcionar, é sério qualquer texto, será mesmo????
      </h2>
    </div>

    <div class="container-title-animation">
      <h2 class="title title-animation">
        Qualquer texto vai funcionar, é sério qualquer texto, será mesmo????
      </h2>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        gsap.registerPlugin(ScrollTrigger);

        const animationSplit = () => {
          const sections = document.querySelectorAll(
            ".container-title-animation"
          );

          if (!sections.length) return;

          sections.forEach((section) => {
            const title = section.querySelector(".title");
            const getWord = title.textContent.trim();
            const words = getWord.split(" ");

            const time = 50;
            let delay = 0;

            title.textContent = "";
            title.style.opacity = 1;

            words.forEach((text, index) => {
              if (index < words.length) {
                title.appendChild(document.createTextNode(" "));
              }

              const letters = text.split("");

              letters.forEach((letter) => {
                const span = document.createElement("span");
                span.textContent = letter;
                span.style.opacity = 0;
                title.appendChild(span);

                setTimeout(() => {
                  let timer = setInterval(() => {
                    if (letter.length == 1) {
                      span.style.opacity = 1;
                    } else {
                      clearInterval(timer);
                    }
                  }, time);
                }, delay);

                delay += time;
              });
            });
          });
        };

        gsap.to(".container-title-animation", {
          scrollTrigger: ".box",
          x: 500,
        });

        const tl = gsap.timeline({});

        setTimeout(() => {
          animationSplit();
        }, 1000);
      });
    </script>
  </body>
</html>
